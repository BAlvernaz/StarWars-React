<!DOCTYPE html>
<head>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  <script
    src="https://unpkg.com/react@16/umd/react.development.js"
    crossorigin
  ></script>
  <script
    src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"
    crossorigin
  ></script>
  <link
    rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
  />
</head>
<body>
  <div id="root" class="container">
    <script type="text/babel">
      const root = document.querySelector("#root");

      const List = ({ swPeople }) => {
        console.log(swPeople);
        return (
          <ul>
            {swPeople.map(person => {
              return <li key={person.id}>
                <a href={`#${person.id}`}>
                {person.name}
                </a>
                </li>;
            })}
          </ul>
        );
      };

      class CharList extends React.Component {
        constructor() {
          super();
          this.state = {
            swPeople: [],
            id: null
          };
        }
        async componentDidMount() {
          window.addEventListener("hashchange", () => {
            const id = window.location.hash.slice(1) * 1;
            this.setState({ id });
          });

          if (window.location.hash.length > 1) {
            const id = window.location.hash.slice(1) * 1;
            this.setState({ id });
          }

          const swPeopleArr = [];
          for (let i = 1; i < 6; i++) {
            const response = await fetch(`https://swapi.co/api/people/${i}/`);
            const data = await response.json();
            data.id = i;
            swPeopleArr.push(data);
          }

          this.setState({
            swPeople: swPeopleArr
          });
        }

        render() {
          const { swPeople, id } = this.state;
          {
          }
          return (
            <div>
              <h1>Star Wars - React</h1>
              <p>
                <a href="#">Hide Details</a>
              </p>
              {
                !id ? <List swPeople={swPeople} /> : null
              }

            </div>
          );
        }
      }
      ReactDOM.render(<CharList />, root);
    </script>
  </div>
</body>
